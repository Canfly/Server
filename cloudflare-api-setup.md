# Настройка API токена Cloudflare для проекта

Для правильной работы скрипта развертывания необходимо создать API токен в Cloudflare с правами на редактирование DNS-записей вашего домена.

## Шаги по созданию API токена

1. Войдите в вашу панель управления Cloudflare: [https://dash.cloudflare.com/](https://dash.cloudflare.com/)

2. Нажмите на иконку профиля в правом верхнем углу и выберите **"My Profile"**

3. Перейдите на вкладку **"API Tokens"**

4. Нажмите на кнопку **"Create Token"**

5. Выберите шаблон **"Edit zone DNS"** - это именно тот шаблон, который нужен для работы скрипта
   ![Выбор шаблона](https://developers.cloudflare.com/assets/static/84a2bf7dc1a7c9717b0a5f02c38a20d7/9f1fe/api-token-create.png)

6. В разделе **"Zone Resources"** настройте разрешения:
   - **Zone**: Выберите "Specific zone" и укажите ваш домен (например, fillin.moscow)
   - **Permissions**: Убедитесь, что выбрано "DNS:Edit"

7. Установите опциональные параметры:
   - **Client IP Address Filtering**: можно оставить пустым для доступа с любых IP
   - **TTL**: рекомендуется установить ограниченный срок действия (например, 90 дней)

8. Нажмите **"Continue to summary"**, а затем **"Create Token"**

9. **ВАЖНО**: Скопируйте созданный токен и сохраните его в надежном месте. Токен будет показан только один раз!

## Использование токена в скрипте

При запуске скрипта `railway-deploy.sh` вам будет предложено ввести API токен. Вставьте ранее скопированный токен.

Скрипт сохранит токен в локальной конфигурации для последующего использования.

## Проверка токена

Вы можете проверить работоспособность токена с помощью следующей команды:

```bash
curl -X GET "https://api.cloudflare.com/client/v4/user/tokens/verify" \
     -H "Authorization: Bearer YOUR_API_TOKEN" \
     -H "Content-Type: application/json"
```

Замените `YOUR_API_TOKEN` на ваш токен. Успешный ответ будет выглядеть примерно так:

```json
{
  "success": true,
  "errors": [],
  "messages": [],
  "result": {
    "id": "xxx",
    "status": "active"
  }
}
```

## Безопасность

- Никогда не делитесь вашим API токеном
- Используйте токены с ограниченными разрешениями (только те, которые нужны для конкретной задачи)
- Периодически обновляйте токены
- При компрометации немедленно удалите токен через панель управления Cloudflare 